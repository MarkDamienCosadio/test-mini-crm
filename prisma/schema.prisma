generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "postgresql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model Lead {
  id               String           @id @default(cuid())
  firstName        String
  lastName         String
  email            String           @unique
  phone            String?
  propertyInterest PropertyInterest
  source           LeadSource
  transaction      TransactionType
  status           LeadStatus       @default(NEW)
  notes            Note[]
  appointments     Appointment[]
  createdAt        DateTime         @default(now())
  updatedAt        DateTime         @updatedAt

  @@map("leads") // Explicitly name the table 'leads'
}

model Note {
  id        String   @id @default(cuid())
  content   String
  lead      Lead     @relation(fields: [leadId], references: [id], onDelete: Cascade)
  leadId    String
  createdAt DateTime @default(now())

  @@index([leadId])
  @@map("notes") // Explicitly name the table 'notes'
}

model Appointment {
  id        String   @id @default(cuid())
  title     String
  startTime DateTime
  endTime   DateTime
  lead      Lead     @relation(fields: [leadId], references: [id], onDelete: Cascade)
  leadId    String
  createdAt DateTime @default(now())

  @@index([leadId])
}

enum LeadStatus {
  NEW
  CONTACTED
  SCHEDULED_VISIT
  CLOSED
  DROPPED
}

enum PropertyInterest {
  LOT
  CONDO
  HOUSE
}

enum LeadSource {
  SOCIAL_MEDIA
  INTERNET
  REFERRAL
  WALK_IN
}

enum TransactionType {
  BUYING
  SELLING
}